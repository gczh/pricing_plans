<div class="pricing-plans-card <%= 'pricing-plans-card--highlighted' if highlighted %>">
  <div class="pricing-plans-card__header">
    <h3 class="pricing-plans-card__title"><%= plan.name %></h3>
    <% if plan.description %>
      <p class="pricing-plans-card__description"><%= plan.description %></p>
    <% end %>
  </div>

  <div class="pricing-plans-card__price">
    <% if plan.price_string %>
      <span class="pricing-plans-card__price-text"><%= plan.price_string %></span>
    <% elsif plan.price %>
      <% if plan.price.zero? %>
        <span class="pricing-plans-card__price-text">Free</span>
      <% else %>
        <span class="pricing-plans-card__price-amount">$<%= plan.price %></span>
        <span class="pricing-plans-card__price-period">/month</span>
      <% end %>
    <% end %>
  </div>

  <% if plan.bullets.any? %>
    <ul class="pricing-plans-card__features">
      <% plan.bullets.each do |bullet| %>
        <li><%= bullet %></li>
      <% end %>
    </ul>
  <% end %>

  <% if plan.credit_inclusions.any? %>
    <div class="pricing-plans-card__credits">
      <h4 class="pricing-plans-card__credits-title">Included Credits:</h4>
      <% plan.credit_inclusions.each do |operation_key, inclusion| %>
        <div class="pricing-plans-card__credit-item">
          <%= number_with_delimiter(inclusion[:amount]) %> <%= operation_key.to_s.humanize.downcase %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="pricing-plans-card__cta">
    <% cta_label = plan.cta_text %>
    <% cta_href  = plan.cta_url.presence || pricing_plans_auto_cta_url(plan, (defined?(current_user) && current_user)) %>
    <% if cta_href.present? %>
      <a href="<%= cta_href %>" class="pricing-plans-card__button" data-plan="<%= plan.key %>"><%= cta_label %></a>
    <% else %>
      <button class="pricing-plans-card__button" data-plan="<%= plan.key %>"><%= cta_label %></button>
    <% end %>
  </div>
</div>